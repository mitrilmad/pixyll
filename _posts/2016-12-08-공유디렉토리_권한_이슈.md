---
layout:     post
title:      unix/linux 파일 권한 관련 내용 정리
date:       2016-12-08 10:59:00
summary:    공유디스크 와 uid 관련 내용
categories: mtrlmd
---

*  운영시스템에서 경험한 이슈를 기록 해 봅니다.
*  소유자가 없는 파일들을 / 에서 find -nouser 옵션으로 검색 했습니다.
*  찾은 파일들의 Owner를 루트로 변경 했습니다. (디스크를 공유하는 '서버1', '서버2' 두대에서 모두 동일한 작업을 함)
*  배치에서 접근하는 파일에 권한 문제가 발생했습니다.
*  실제 파일의 Owner를 확인 해 본 결과 루트로 변경 된 것을 확인 했습니다.
*  find -nouser 옵션은 /etc/passwd 에 있는 uid 값을 검색해서 없는 경우의 파일이나 디렉토리를 찾아주게 되는데,
   문제가 된 파일은 '서버1' 의 /etc/passwd 에 있는 계정으로 생성하는 파일인데 왜 바뀐건지..누가 바꾼건지 계속 고민하기 시작 했습니다.
*  원인은 '서버1' , '서버2' 의 동일한 계정이 존재 하나, uid 값이 다르기 때문에, '서버1'의 계정으로 생성한 파일은 '서버2' 에서 find -nouser 옵션으로
   검색 했을 때 Owner가 없게 된 것 입니다. (물론 '서버1'의 계정의 uid 값이 '서버2'의 /etc/passwd 에 있다면 '서버2' 에서는 그 계정이 Owner 로 보임)
*  그러므로 공유디스크가 존재하고 , 공유디스크에 접근하는 어플리케이션이 있는 경우 양 서버의 uid 값을 맞춰 주는게 반드시 필요할거 같다는 생각이 듭니다.
